---
title: Termux
tags: [Linux, programming]
style: fill
color: warning
description: A Linux inside a mobile phone
---

<p align="center">
  <img src="https://img.utdstc.com/icon/f2c/494/f2c4945b025c428de51403fa6e5c30731a43fb703d9f043c0310928d58645c9e" alt="Termux icon" />
</p>

# Introducci√≥n

Termux es una poderosa herramienta de emulaci√≥n de terminal que permite ejecutar un entorno Linux (casi completo) sin necesidad de [rootear](https://en.wikipedia.org/wiki/Rooting_(Android)) el dispositivo m√≥vil Android. Es decir, sin necesidad de conseguir permisos/control de superusuario (root) del sistema operativo del m√≥vil.

> [!Note]
> 
> Rootear un Android es el equivalente a hacer _jailbreaking_ en iPhones o iPads.

Los binary packages que necesitemos instalar en nuestra distro Linux del m√≥vil los podemos manejar usando un [package manager](https://www.digitalocean.com/community/tutorials/package-management-basics-apt-yum-dnf-pkg), t√≠picamente el de FreeBSD, para tareas como actualizar, instalar y eliminar software. Desde mi experiencia, no hay problema instalando la mayor√≠a de los paquetes normales, siempre que se encuentre un mirror practicable para descargarlos.

La mejor manera de instalar Termux es mediante F-Droid. Puedes obtener las builds de Termux desde [F-Droid](https://f-droid.org/packages/com.termux/). **No lo instales desde Google Play.** Como apuntan en su [wiki](https://wiki.termux.com/wiki/Main_Page). Algo igual de vital que Termux son sus addons (e.g., API). Las opciones para instalar todo esto son: o bien desde F-Droid todo, o bien desde otros instaladores externos todo, o bien desde Google Play, que no te va a funcionar correctamente. Google lo "capa" y trata de controlar y restringir todo aquello externo que se usa dentro de sus herramientas, por supuesto.

## Android vs Linux

Como curiosidad, el propio sistema operativo Android (creado por Google) est√° basado en el kernel de Linux, pero con una diferencia clave: Android es Linux sin GNU. Esto significa que, aunque comparte el n√∫cleo con distribuciones tradicionales como Ubuntu o Debian, prescinde de las herramientas GNU y en su lugar utiliza componentes propios como la biblioteca Bionic y un entorno de ejecuci√≥n basado en Java (Dalvik/ART). Esta modularidad permite que cualquier m√≥vil, independientemente del fabricante, pueda ejecutar Android, aunque requiere drivers propietarios para cada componente hardware (c√°maras, sensores, chips de radio, etc.), lo que limita la estandarizaci√≥n y la libertad de modificaci√≥n.

Por el contrario, un sistema Linux tradicional (GNU/Linux) combina el kernel Linux con herramientas GNU, ofreciendo un ecosistema de software nativo (GTK/Qt, gestores de paquetes como APT o DNF) y mayor compatibilidad con hardware est√°ndar (gracias a BIOS/UEFI y drivers m√°s abiertos). Mientras Android est√° optimizado para m√≥viles con interfaces t√°ctiles y restricciones de fabricantes, las distros GNU/Linux priorizan la flexibilidad, el control del usuario y la interoperabilidad en PCs y servidores. En resumen: Android es Linux en su n√∫cleo, pero con un enfoque radicalmente distinto en software, hardware y filosof√≠a de uso.

# Termux

Ahora bien, ¬øpara qu√© es √∫til esta herramienta? ¬øPara qu√© quiero ni siquiera un Linux en Android? Pues [aqu√≠](https://www.reddit.com/r/termux/comments/udf2yk/what_can_we_do_with_termux/) nos cuentan unas cuantas aplicaciones posibles.

Por ejemplo:

1. Automatizar tareas (fotos, backups, alarmas...).
2. Ejecutar scripts en Python, Bash, Node.js, etc.
3. Servidores web, bases de datos, herramientas de hacking √©tico.
4. Monitorear sensores del dispositivo (GPS, bater√≠a, aceler√≥metro).
5. Entrar desde SSH al m√≥vil, usar el modo gr√°fico, etc.

En este post, exploraremos varias herramientas muy interesantes, una a una, y las juntaremos en una sola gran automatizaci√≥n, incluyendo:

1. Automatizaci√≥n con crontab de m√∫ltiples funcionalidades (tomar fotograf√≠as autom√°ticamente, activar el modo silencioso, bajar el brillo a una hora determinada...).
2. Seguridad y antirobo (env√≠o de ubicaci√≥n a Telegram por si se pierde el m√≥vil o lo roban).

![termuxHome](../assets/blog_images/2025-02-12-termux/termuxHome.jpeg)

### Sobre el **almacenamiento compartido**

En Termux, se puede acceder al almacenamiento del usuario (como `/sdcard`) si se da permiso con el comando `termux-setup-storage`. Pero no se pueden ver carpetas privadas de otras apps ni todo el sistema sin root. Con root, s√≠ se puede, pero naturalmente tiene riesgos. Para compartir carpetas, se pueden copiar archivos entre Termux y las carpetas que s√≠ son accesibles.

> [!Note]
> 
> Sobre la opacidad de Android o Google
> 
> Parece que desde Android 11, Google aplica ‚ÄúScoped Storage‚Äù, que bloquea el acceso libre al almacenamiento y oculta carpetas como `/Android/data/`, afectando a gestores de archivos y a apps avanzadas como Termux, que deben recurrir a m√©todos alternativos (FTP, SSH, document picker) para mover archivos; aunque se justifica como una mejora de seguridad, muchos lo ven como un cerrojazo que limita la libertad del usuario y refuerza el control de Google sobre el ecosistema Android.

### Tarea de crontab para tomar una foto

Para hacer una foto, veremos que se puede ejecutar un comando como este:

```bash
termux-camera-photo -c 1 ~/storage/shared/Pictures/TermuxFotos/foto-$(date +%Y%m%d-%H%M).jpg
```

Tarea crontab lista para que tome una foto todos los d√≠as a las 18:09 con la c√°mara frontal (`-c 1`), y la guarde en `~/storage/shared/Pictures/TermuxFotos/`.

En Termux, ejecutar:

```bash
crontab -e
```

A√±ade esta l√≠nea al final:

```cron
9 18 * * * mkdir -p ~/storage/shared/Pictures/TermuxFotos && termux-camera-photo -c 1 ~/storage/shared/Pictures/TermuxFotos/foto-$(date +\%Y\%m\%d-\%H\%M).jpg
```

> **NOTA:** Se usan `\%` en lugar de `%` para evitar errores en crontab, que interpreta `%` como un salto de l√≠nea.

La opci√≥n `-c 1` indica usar la c√°mara frontal. Guardar en la carpeta `TermuxFotos` dentro de `Pictures`. Aseg√∫rate de que `crond` est√© funcionando. En Termux, ejecutar:

```bash
pkg install cronie -y
crond
```

Para que el servicio cron se inicie autom√°ticamente cada vez que abras Termux, se puede a√±adir esto al `~/.bashrc` o `~/.zshrc`:

```bash
echo "crond" >> ~/.bashrc
```

Por √∫ltimo, verificar permisos de ejecuci√≥n desde el Android base. Asegurarse de que Termux tiene permiso para c√°mara y almacenamiento en: **Ajustes > Aplicaciones > Termux > Permisos**

Salir de Termux, naturalmente, impide que `crond` siga funcionando aunque sea en segundo plano, en principio y a este nivel b√°sico, pues todos los procesos en segundo plano se detienen, incluyendo `crond`. Una opci√≥n para impedir que esto pase, que las actividades en segundo plano sigan funcionando, ser√≠a (adem√°s de rootear el m√≥vil) explorar herramientas como `termux-wake`.

## Aplicaciones

A continuaci√≥n, un grupo de experimentos curiosos con Termux, listados y con ejemplos de funcionamiento.

Antes de nada, c√≥mo instalar paquetes, e.g., `requests`:

Para instalar el paquete `requests` en Termux, primero se necesita tener Python instalado. Gu√≠a aproximada:

1. **Instalar Python en Termux**
   Abrir Termux y ejecutar:
   ```bash
   pkg update && pkg upgrade
   pkg install python
   ```

2. **Instalar pip (viene con Python normalmente)**
   Verificar que `pip` est√© instalado:
   ```bash
   pip --version
   ```
   Si no est√°, se puede intentar reinstalar Python:
   ```bash
   pkg install python
   ```

3. **Instalar el paquete `requests`**
   Una vez se tenga pip, simplemente instalar `requests` con:
   ```bash
   pip install requests
   ```

4. **Probar la instalaci√≥n**
   Abrir Python en la terminal:
   ```bash
   python
   ```
   Y luego escribir:
   ```python
   import requests
   print(requests.__version__)
   ```

### Macro-automatizaci√≥n de tareas

Se puede manipular la bater√≠a y otras funciones del m√≥vil con tareas, todas practicables y automatizables desde Termux:

#### üîã 1. *Reducir brillo si la bater√≠a baja del 55%*

```bash
[ "$(termux-battery-status | jq .percentage)" -lt 55 ] && termux-brightness 25
```

> ‚úÖ Puedes ponerlo en un script y ejecutarlo con cron cada 10 minutos, por ejemplo.

#### üîå 2. *Poner brillo al 80% si el cargador est√° conectado*

```bash
[ "$(termux-battery-status | jq .status)" = "CHARGING" ] && termux-brightness 200
```

#### üîá 3. *Silenciar el volumen por completo por la noche*

```bash
termux-volume music 0
termux-volume ring 0
termux-notification --title "Silencio nocturno" --content "Volumen desactivado"
```

Se pueden poner en crontab a las 23:00, por ejemplo.

#### üîî 4. *Alarma si bater√≠a baja de 20%*

```bash
[ "$(termux-battery-status | jq .percentage)" -lt 20 ] && termux-toast "¬°Bater√≠a baja!" && termux-vibrate
```

#### üì∏ 5. *Tomar una foto cada X horas y guardarla*

Se podr√≠a tomar una cada 3 horas:

```bash
termux-camera-photo -c 0 ~/storage/shared/TermuxFotos/foto-$(date +%Y%m%d-%H%M).jpg
```

Esto es por mera diversi√≥n, la verdad, como la aplicaci√≥n [BeReal](https://bereal.com/es/), solo que verdaderamente _sin que te des cuenta_.

![foto_aleatoria](../assets/blog_images/2025-02-12-termux/foto_aleatoria.jpeg)

### Macro-tarea con crontab

Podemos usar `cron -e` para programar una macro-tarea de scripts con Termux, del tipo:

```bash
/data/data/com.termux/files/usr/tmp/crontab.kdcFYy
# üïó 1. Tomar 10 fotos al d√≠a (una cada hora de 8:00 a >
0 8 * * * ~/bin/foto_aleatoria.sh
0 9 * * * ~/bin/foto_aleatoria.sh
0 10 * * * ~/bin/foto_aleatoria.sh
0 11 * * * ~/bin/foto_aleatoria.sh
0 12 * * * ~/bin/foto_aleatoria.sh
0 13 * * * ~/bin/foto_aleatoria.sh
0 14 * * * ~/bin/foto_aleatoria.sh
0 15 * * * ~/bin/foto_aleatoria.sh
0 16 * * * ~/bin/foto_aleatoria.sh
0 17 * * * ~/bin/foto_aleatoria.sh

# üîã 2. Cada 10 minutos: si la bater√≠a est√° por debajo >
*/10 * * * * [ "$(termux-battery-status | jq .percentag>

# üîå 3. Cada 10 minutos: si est√° cargando, sube el bril>
*/10 * * * * [ "$(termux-battery-status | jq -r .status>

# üîá 4. A las 23:00, silenciar todo el volumen
0 23 * * * termux-volume music 0 &‚Ä¶
```

![cron](../assets/blog_images/2025-02-12-termux/cron.jpeg)

### Macro-automatizaci√≥n en `~/scripts/`

Juntamos todos estos en un script de bash, del tipo:

```bash
# METER AQUI TODO EL CODIGO DE AUTOMATIZACI√ìN DE MI TERMUX
```

Todo esto se puede programar realmente en crontab o con `termux-job-scheduler`.

# Alarma a Telegram de localizaci√≥n

Ahora haremos un script que mande geolocalizaci√≥n/ubicaci√≥n a un canal de Telegram, por si lo roban y que funcione incluso estando el tel√©fono bloqueado. Usando Python y solicitudes a la API de un servicio de localizaci√≥n aproximada mediante IP, por ejemplo.

Para que la tarea funcione aunque est√© bloqueado, sepamos que en Linux, se pueden programar scripts que se ejecuten en segundo plano con cron, incluso al inicio del sistema, mediante un simple s√≠mbolo `&`. (Algo que violar√≠a pol√≠ticas de seguridad de la plataforma en Android/iOS y adem√°s ser√≠a mucho m√°s complicado sin acceso root/jailbreak o aplicaciones que automatizan tareas, incluso con widgets, como [Tasker](https://tasker.joaoapps.com/) (ver [aqu√≠](https://wiki.termux.com/wiki/Termux:Tasker)) o [MacroDroid](https://www.macrodroid.com/)).

Para conseguir acceso a la geolocalizaci√≥n, como para acceder a GPS necesitamos permiso a dicha herramienta y no siempre es posible, o como alternativa, podemos obtener ubicaci√≥n aproximada mediante redes WiFi cercanas o IP. Eso s√≠, si no hay acceso a Internet, si no hay red, no hay forma de enviar nada.

A continuaci√≥n describimos c√≥mo usamos `requests` a `https://ip-api.com/` para obtener la ubicaci√≥n y enviarla por Telegram.

Primero necesitamos crear un bot de Telegram. Esto se vuelve trivial hablando con `@BotFather`. Se escribe: `/newbot` y se sigue los pasos.

Guardar el token del bot (algo como `123456789:ABCdefGHIjkl...`).

Luego, mandar cualquier mensaje al bot (e.g., "Hola") y obtener el ID del grupo entrando en la URL tipo `https://api.telegram.org/bot<tu_token>/getUpdates` (reemplazando `<tu_token>` por el del bot que acabamos de crear)

Se ver√° el `chat.id` del grupo => a mi me sali√≥  **146XXXXXXX** (tampoco lo voy a poner aqu√≠)

El script Python que env√≠a ubicaci√≥n cada 3 segundos puede ser algo as√≠:

```python
import requests
import time

# Configuraci√≥n del bot
BOT_TOKEN = 'TU_TOKEN_DEL_BOT'
CHAT_ID = '-146XXXXXXX'  # ID del grupo

def get_location():
    try:
        response = requests.get('http://ip-api.com/json/')
        data = response.json()
        location = f"üåç {data['city']}, {data['regionName']}, {data['country']}\n" \
                   f"üìç Lat: {data['lat']} - Lon: {data['lon']}\n" \
                   f"üíª IP: {data['query']}"
        return location
    except:
        return "‚ùå No se pudo obtener la ubicaci√≥n"

def send_telegram(message):
    url = f"https://api.telegram.org/bot{BOT_TOKEN}/sendMessage"
    payload = {
        'chat_id': CHAT_ID,
        'text': message
    }
    try:
        requests.post(url, data=payload)
    except Exception as e:
        print("Error enviando a Telegram:", e)

while True:
    loc = get_location()
    send_telegram(loc)
    time.sleep(3)
```

![send_location](../assets/blog_images/2025-02-12-termux/send_location.jpeg)

### Operaci√≥n: dejarlo ejecutando siempre

Una opci√≥n es iniciarlo junto con el sistema (Linux):

Crear un archivo `.desktop` en `~/.config/autostart/` para iniciar el script al prender el subsistema Termux (o el m√≥vil).

O tambi√©n se puede enviar una sola vez desde el script y en su lugar usar `crontab -e` con la opci√≥n `&` para que ejecute en segundo plano, i.e., que no se quede esperando en la terminal hasta el retorno del script:

```cron
@reboot /usr/bin/python3 /ruta/a/script.py &
```

> [!Note]
> 
> Otras opciones ser√≠an usar `tmux`, `nohup` o `systemd` para asegurar que sigue corriendo sin cerrar el terminal.

Cabe decir que la geolocalizaci√≥n IP no es muy precisa (aprox. 5 km m√°ximo de exactitud, con alta precisi√≥n, de promedio), pero para precisi√≥n GPS real se necesitar√≠a acceso a hardware o apps m√≥viles. Para la localizaci√≥n, tambi√©n se podr√≠a usar `termux-location`.

![Funcionamiento de Telegram](../assets/blog_images/2025-02-12-termux/telegram.jpg)

# Referencias

- Hay buenos tutoriales en [Termux](https://prohoster.info/es/blog/administrirovanie/termux-shag-za-shagom-chast-1-2)

# TODO

- Otra posible aplicaci√≥n: Sistema aviso de robo. Si alguien nos quiere robar el m√≥vil en la playa, podemos hacer sonar una alarma estruendosa y que le saque fotos. Por ejemplo, si colocamos el m√≥vil en horizontal y detectamos por medio del aceler√≥metro que se ha girado mucho, o algo as√≠. O estar sacando fotos peri√≥dicamente y detectar un cambio brusco de foto a otra. 
